<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TumbleweedBonnie">
    <meta name="author" content="TumbleweedBonnie">

    <title>TumbleweedBonnie</title>
    <link rel="shortcut icon" href="img/favicon.ico" />
    <link href="css/style.css" rel="stylesheet">
</head>

<body>

    <img id="cvs-img" alt="background" src="https://tumbleweedbonnie.github.io/img/my-bg.jpg" style="display: none;">

    <div id="canvas-box">
        <canvas id="canvas" width="1920" height="980"></canvas>
    </div>

    <section class="intro">
        <div class="slogan">
            <h4>今天是我们在一起</h4>
            <h1><span id="love-days" style="color: #f70903;font-size: 80px;"></span><span style="color: #f70903;font-size: 30px;">天</span></h1>
            <p style="color: #333;">勿忘初心，方得始终</p>
        </div>  
    </section>

    <script src="js/count-up.js"></script>
    <script src="js/rainy.js"></script>

    <script>
        var options = {
            useEasing: true, 
            useGrouping: true, 
            separator: ',', 
            decimal: '.', 
        },
        loveDays = Math.ceil((+new Date() - 1468319430000) / (1000*60*60*24)),
        loveEle = new CountUp('love-days', 0, loveDays, 0, 3, options);

        setTimeout(function() {
            if (!loveEle.error) {
                loveEle.start();
            } else {
                document.getElementById('love-days').innerHTML = loveDays;
            }
        }, 1000);

        window.onload = function () {
            raining();
        }

        function raining() {
            var image = document.getElementById('cvs-img');
            image.onload = function () {
                var engine = new RainyDay('canvas', 'cvs-img', window.innerWidth, window.innerHeight);
                
                engine.gravity = engine.GRAVITY_NON_LINEAR;
                engine.trail = engine.TRAIL_DROPS;
                engine.rain([engine.preset(3, 3, 0.88), engine.preset(5, 5, 0.9), engine.preset(6, 2, 1)], 100);
            };

            image.crossOrigin = 'anonymous';
            image.src = 'https://tumbleweedbonnie.github.io/img/my-bg.jpg';
        } 
    </script>

</body>
</html>
